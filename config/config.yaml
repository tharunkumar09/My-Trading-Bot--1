# Trading Bot Configuration

# API Configuration (Choose one: upstox or angelone)
api:
  provider: "upstox"  # Options: upstox, angelone
  
  # Upstox API Credentials
  upstox:
    api_key: "${UPSTOX_API_KEY}"
    api_secret: "${UPSTOX_API_SECRET}"
    redirect_uri: "https://127.0.0.1:8080"
  
  # Angel One SmartAPI Credentials
  angelone:
    api_key: "${ANGELONE_API_KEY}"
    client_id: "${ANGELONE_CLIENT_ID}"
    password: "${ANGELONE_PASSWORD}"
    totp_secret: "${ANGELONE_TOTP_SECRET}"

# Trading Strategy Configuration
strategy:
  name: "Multi-Indicator Momentum Strategy"
  
  # Technical Indicators
  indicators:
    rsi:
      period: 14
      oversold: 30
      overbought: 70
    macd:
      fast_period: 12
      slow_period: 26
      signal_period: 9
    supertrend:
      period: 10
      multiplier: 3
    ema:
      period: 200
  
  # Entry Conditions (all must be true)
  entry_rules:
    - "RSI < oversold"
    - "MACD_line > MACD_signal"  # Bullish crossover
    - "close > EMA_200"  # Above long-term trend
    - "supertrend == 'buy'"
  
  # Exit Conditions (any can trigger)
  exit_rules:
    - "RSI > overbought"
    - "MACD_line < MACD_signal"  # Bearish crossover
    - "stop_loss_hit"
    - "target_hit"

# Risk Management
risk_management:
  max_portfolio_risk: 0.02  # 2% of portfolio per trade
  max_position_size: 0.10   # 10% of portfolio per position
  max_open_positions: 5
  
  stop_loss:
    type: "atr"  # Options: atr, percentage, fixed
    atr_multiplier: 2.0
    percentage: 0.02  # 2% stop loss if type is percentage
  
  take_profit:
    risk_reward_ratio: 2.0  # 1:2 risk-reward
  
  trailing_stop:
    enabled: true
    activation_pct: 0.03  # Activate after 3% profit
    trail_pct: 0.015      # Trail by 1.5%
  
  position_sizing:
    method: "risk_based"  # Options: risk_based, fixed, kelly

# Trading Universe
universe:
  indices:
    - "NIFTY50"
    - "NIFTY100"
  
  # Specific stocks (NSE symbols)
  stocks:
    - "RELIANCE"
    - "TCS"
    - "INFY"
    - "HDFCBANK"
    - "ICICIBANK"
    - "HINDUNILVR"
    - "ITC"
    - "SBIN"
    - "BHARTIARTL"
    - "KOTAKBANK"
    - "LT"
    - "ASIANPAINT"
    - "MARUTI"
    - "AXISBANK"
    - "WIPRO"
    - "TITAN"
    - "ULTRACEMCO"
    - "NESTLEIND"
    - "BAJFINANCE"
    - "HCLTECH"
  
  # Filters
  filters:
    min_price: 50
    max_price: 10000
    min_volume: 100000  # Minimum daily volume
    min_market_cap: 1000  # In crores

# Backtesting Configuration
backtesting:
  start_date: "2003-01-01"
  end_date: "2023-12-31"
  initial_capital: 1000000  # 10 lakhs
  commission: 0.001  # 0.1% per trade
  slippage: 0.0005   # 0.05% slippage
  
  # Performance metrics to calculate
  metrics:
    - "total_return"
    - "cagr"
    - "sharpe_ratio"
    - "sortino_ratio"
    - "max_drawdown"
    - "win_rate"
    - "profit_factor"
    - "total_trades"
    - "avg_trade_duration"

# Live Trading Configuration
live_trading:
  enabled: false  # Set to true for live trading
  mode: "paper"   # Options: paper, live
  
  # Trading hours (IST)
  market_hours:
    start: "09:15"
    end: "15:30"
  
  # Order execution
  order_type: "LIMIT"  # Options: MARKET, LIMIT
  limit_price_buffer: 0.002  # 0.2% buffer for limit orders
  
  # Rate limiting
  max_orders_per_minute: 5
  max_api_calls_per_second: 2

# Event-Driven Trading (for market shocks)
event_driven:
  enabled: true
  
  # News monitoring
  news:
    enabled: true
    sources:
      - "newsapi"
      - "rss_feeds"
    keywords:
      positive: ["profit", "growth", "expansion", "merger", "acquisition", "breakthrough"]
      negative: ["loss", "decline", "bankruptcy", "fraud", "investigation", "war", "tariff"]
    sentiment_threshold: 0.5
  
  # Earnings announcements
  earnings:
    enabled: true
    days_before: 2  # Avoid positions 2 days before earnings
    days_after: 1   # Wait 1 day after earnings
  
  # Volatility spike detection
  volatility:
    enabled: true
    threshold: 2.0  # Exit if volatility > 2x average
  
  # Market-wide events
  market_events:
    - "budget_day"
    - "policy_announcement"
    - "major_index_circuit_breaker"

# Logging & Monitoring
logging:
  level: "INFO"  # Options: DEBUG, INFO, WARNING, ERROR
  log_to_file: true
  log_file: "data/logs/trading_bot.log"
  max_file_size: "10MB"
  backup_count: 5
  
  # Trade logging
  trade_log: "data/logs/trades.csv"
  
  # Performance monitoring
  send_alerts: true
  alert_methods:
    - "email"
    - "telegram"
  
  # Alert conditions
  alerts:
    - condition: "drawdown > 0.10"
      message: "Drawdown exceeded 10%"
    - condition: "daily_loss > 0.05"
      message: "Daily loss exceeded 5%"

# Database Configuration (optional)
database:
  enabled: false
  type: "sqlite"  # Options: sqlite, mongodb, postgresql
  path: "data/trades.db"
  
  # For MongoDB/PostgreSQL
  # host: "localhost"
  # port: 27017
  # username: ""
  # password: ""
  # database: "trading_bot"

# Deployment Configuration
deployment:
  environment: "development"  # Options: development, staging, production
  timezone: "Asia/Kolkata"
  
  # Health check
  health_check_interval: 300  # seconds
  
  # Auto-restart on failure
  auto_restart: true
  max_restart_attempts: 3
